(()=>{var e={};e.id=893,e.ids=[893],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},77632:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>c.a,__next_app__:()=>f,originalPathname:()=>b,pages:()=>o,routeModule:()=>u,tree:()=>l}),r(65112),r(59102),r(32029),r(35866);var a=r(23191),s=r(88716),n=r(37922),c=r.n(n),d=r(95231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);r.d(t,i);let l=["",{children:["user",{children:["feedback",{children:["[show]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65112)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\user\\feedback\\[show]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,59102)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\user\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\user\\feedback\\[show]\\page.tsx"],b="/user/feedback/[show]/page",f={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/user/feedback/[show]/page",pathname:"/user/feedback/[show]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},30306:(e,t,r)=>{let a={"1a635e3ad0d4ba09b5fb7f9c957d16154a840671":()=>Promise.resolve().then(r.bind(r,47671)).then(e=>e.MarkViewed),"40ea62831202c6461f26fac9e50464e838172c49":()=>Promise.resolve().then(r.bind(r,47671)).then(e=>e.GetFeedbacks),"8588b1a6efb9be2aea37318aaf81080f249e6819":()=>Promise.resolve().then(r.bind(r,47671)).then(e=>e.addFeedback),b676c491d43455759d695393904c4b94ae2e9059:()=>Promise.resolve().then(r.bind(r,47671)).then(e=>e.GetUserFeedbacks),"258046a1e3860fa89174224a272f0cdf55590a87":()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.getAllUsersToAssign),"4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77":()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.userCreationFlow),"5929f08dcffcabce9ece9ec262c4d1da2aec33a2":()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.updateUserRoleMapping),"8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7":()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.getUsersFormData),a448f998d28c1535f4ba9b2d14794207c3b56e92:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.createUser),bfb948864d3a9223fe1b23007ea4ecc247e7419e:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.getUserFromDb),c3a6fc5c59e2081ad90a6af0191920ab22d8d718:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.checkUserPermissionForSurvey),d16ec756617f7017d927ecb303b422c45c2b5f8f:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.checkUserExistence),deb9a62e45009688455aa5d6d724f09a72e9c0c6:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.getUserIdFromClerkId),ef8258559ec09924b33df9cdb206b83c322e79bf:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.getAllUsers),f7abf20a8088752418c2e27ab26067e3f68fe53d:()=>Promise.resolve().then(r.bind(r,92153)).then(e=>e.getUserById)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"1a635e3ad0d4ba09b5fb7f9c957d16154a840671":s.bind(null,"1a635e3ad0d4ba09b5fb7f9c957d16154a840671"),"40ea62831202c6461f26fac9e50464e838172c49":s.bind(null,"40ea62831202c6461f26fac9e50464e838172c49"),"8588b1a6efb9be2aea37318aaf81080f249e6819":s.bind(null,"8588b1a6efb9be2aea37318aaf81080f249e6819"),b676c491d43455759d695393904c4b94ae2e9059:s.bind(null,"b676c491d43455759d695393904c4b94ae2e9059"),"258046a1e3860fa89174224a272f0cdf55590a87":s.bind(null,"258046a1e3860fa89174224a272f0cdf55590a87"),"4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77":s.bind(null,"4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77"),"5929f08dcffcabce9ece9ec262c4d1da2aec33a2":s.bind(null,"5929f08dcffcabce9ece9ec262c4d1da2aec33a2"),"8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7":s.bind(null,"8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7"),a448f998d28c1535f4ba9b2d14794207c3b56e92:s.bind(null,"a448f998d28c1535f4ba9b2d14794207c3b56e92"),bfb948864d3a9223fe1b23007ea4ecc247e7419e:s.bind(null,"bfb948864d3a9223fe1b23007ea4ecc247e7419e"),c3a6fc5c59e2081ad90a6af0191920ab22d8d718:s.bind(null,"c3a6fc5c59e2081ad90a6af0191920ab22d8d718"),d16ec756617f7017d927ecb303b422c45c2b5f8f:s.bind(null,"d16ec756617f7017d927ecb303b422c45c2b5f8f"),deb9a62e45009688455aa5d6d724f09a72e9c0c6:s.bind(null,"deb9a62e45009688455aa5d6d724f09a72e9c0c6"),ef8258559ec09924b33df9cdb206b83c322e79bf:s.bind(null,"ef8258559ec09924b33df9cdb206b83c322e79bf"),f7abf20a8088752418c2e27ab26067e3f68fe53d:s.bind(null,"f7abf20a8088752418c2e27ab26067e3f68fe53d")}},52111:(e,t,r)=>{Promise.resolve().then(r.bind(r,95722))},95722:(e,t,r)=>{"use strict";r.d(t,{UserFeedbacks:()=>b});var a=r(10326),s=r(17577),n=r(53219),c=r(27324);let d=function({feedback:e}){let{id:t,title:r,description:s,createdby:n,createdat:d,viewed:i,isanon:l}=e;return(0,a.jsxs)("div",{className:"mb-4 w-4/6 rounded-md bg-white p-4 shadow-lg",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:r}),a.jsx("p",{className:"text-m rounded-lg bg-slate-200 px-2 py-1 text-black shadow-md",children:l?"Anonymous":n})]}),a.jsx("p",{className:"mb-2 text-base",children:s}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[a.jsx("p",{className:"text-sm text-gray-500",children:(0,c.i)(d)}),!i&&a.jsx("p",{className:"rounded-3xl bg-rose-500 px-2 py-1 text-white",children:"Not Viewed"})||a.jsx("p",{className:"rounded-3xl bg-green-500 px-2 py-1 text-white",children:"Viewed"})]})]})};var i=r(25988),l=r(36204);let o=(e,t,r)=>{let a=(t-1)*r;return e.slice(a,a+r)};function b({feedbacks:e}){let[t,r]=(0,s.useState)(1),[c,b]=(0,s.useState)(e),[f,u]=(0,s.useState)(e),[h,x]=(0,s.useState)([]),p=e=>{let r=e.target.id,a=[];"viewed"===r?console.log(a=c.filter(e=>e.viewed)):"not-viewed"===r?a=c.filter(e=>!e.viewed):"all"===r&&(a=c),x(o(a,t,5))};return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[a.jsx(n.Z,{page:2}),(0,a.jsxs)("div",{className:"w-4/6 flex flex-row",children:[a.jsx(l.Z,{onChangeCallback:e=>{if(console.log(e),0===e.trim().length){x(()=>o(c,t,5));return}let r=c.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()));console.log("arr ->",r),u(r),x(()=>o(f,t,5))},placeholder:"Search by Title"}),(0,a.jsxs)("ul",{className:"flex flex-row gap-2 ml-auto",children:[a.jsx("li",{className:"border-2 flex justify-center items-center border-sky-300 px-4 rounded-full hover:bg-sky-500 hover:text-white transition-all hover:cursor-pointer",onClick:p,id:"all",children:"All"}),a.jsx("li",{className:"border-2 flex justify-center items-center border-green-300 px-4 rounded-full hover:bg-green-500 hover:border-black hover:text-white transition-all hover:cursor-pointer",onClick:p,id:"viewed",children:"Viewed"}),a.jsx("li",{className:"border-2 flex justify-center items-center border-rose-300 px-4 rounded-full hover:bg-rose-500 hover:border-black hover:text-white transition-all hover:cursor-pointer",onClick:p,id:"not-viewed",children:"Not Viewed"})]})]}),h.map((e,t)=>a.jsx(d,{feedback:e},t)),a.jsx(i.Z,{items:f.length,currentPage:t,pageSize:5,onPageChange:e=>{r(e)}})]})}},53219:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(10326),s=r(90434);function n({page:e}){let t="inline-block my-4 text-center px-4 py-2 bg-slate-300 transition duration-150 ease-linear hover:bg-slate-400",r="inline-block my-4 text-center px-4 py-2 bg-slate-600 text-white";return(0,a.jsxs)("div",{className:"py-2 flex flex-row w-full items-center justify-center bg-zinc-200 sticky top-0 mb-2",children:[a.jsx(s.default,{href:"/user/feedback",className:1===e?r:t,children:"Feedback Form"}),a.jsx(s.default,{href:"/user/feedback/[id]",as:"/user/feedback/1",className:2===e?r:t,children:"My Feedbacks"})]})}},36204:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(10326),s=r(17577);let n=({onChangeCallback:e,placeholder:t})=>{let[r,n]=(0,s.useState)("");return(0,a.jsxs)("div",{className:"flex items-center gap-2 border-2 border-gray-300 rounded-full overflow-hidden px-2 has-[:focus]:border-sky-300",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"25px",height:"25px",children:a.jsx("path",{d:"M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"})}),a.jsx("input",{className:" bg-white h-[2rem] px-5 rounded-lg text-sm focus:outline-none w-full",type:"search",value:r,onChange:t=>{let r=t.target.value;n(r),e&&e(r)},name:"search",placeholder:t})]})}},25988:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(10326),s=r(71627),n=r.n(s);let c=({items:e,pageSize:t,currentPage:r,onPageChange:s})=>{console.log("items -> ",e);let c=Math.ceil(e/t);if(1===c)return null;let d=Array.from({length:c},(e,t)=>t+1);return a.jsx("div",{children:a.jsx("ul",{className:n().pagination,children:d.map(e=>a.jsx("li",{className:e===r?n().pageItemActive:n().pageItem,onClick:()=>s(e),children:a.jsx("a",{className:n().pageLink,children:e})},e))})})}},27324:(e,t,r)=>{"use strict";r.d(t,{i:()=>a});let a=e=>{if(!e)return"";let t=new Date(e),r=t.getUTCMonth()+1,a=t.getUTCFullYear(),s=t.getUTCDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1];return`${n} ${s}, ${a}`}},71627:e=>{e.exports={container:"Pagination_container__K2pXc",pagination:"Pagination_pagination__YO7tt",pageLink:"Pagination_pageLink__Dbtuc",pageItem:"Pagination_pageItem__S74oz",pageItemActive:"Pagination_pageItemActive__tUfHZ"}},65112:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(19510),s=r(71159),n=r(68570);let c=(0,n.createProxy)(String.raw`D:\EX2Projects\CurrentProjects\HRSQUARED\HRSquared\src\app\user\feedback\[show]\userFeedbacks.tsx`),{__esModule:d,$$typeof:i}=c;c.default;let l=(0,n.createProxy)(String.raw`D:\EX2Projects\CurrentProjects\HRSQUARED\HRSquared\src\app\user\feedback\[show]\userFeedbacks.tsx#UserFeedbacks`);var o=r(47671),b=r(35686);async function f(){let{userId:e}=(0,b.I)();console.log("feedback id",e);let t=await (0,o.GetUserFeedbacks)(e);return a.jsx(l,{feedbacks:t})}function u({params:e}){return a.jsx("div",{children:a.jsx(s.Suspense,{fallback:(0,a.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",a.jsx("h3",{children:"Fetching Tickets ..."})," "]}),children:a.jsx(f,{})})})}},59102:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var a=r(19510),s=r(24890),n=r(33266);let c={title:"Next.js",description:"Generated by Next.js"};function d({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{children:[a.jsx(s.ZP,{}),e,a.jsx(n.Z,{})]})})}},47671:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GetFeedbacks:()=>i,GetUserFeedbacks:()=>o,MarkViewed:()=>l,addFeedback:()=>d});var a=r(24330);r(60166);var s=r(58585),n=r(24925),c=r(92153);async function d(e){console.log("hello add feedback"),console.log(e);let t=await (0,c.getUserIdFromClerkId)(e.userId),r=await (0,n.C)();try{let a={text:"insert into feedbacks (title, description, createdby, isanon) values ($1, $2, $3, $4)",values:[e.title,e.description,t,e.anonymous]};return await r.query(a),!0}catch(e){return console.log(e),r.end(),!1}}async function i(e){let t=await (0,n.C)();try{let r;r=e?`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where viewed=false`:`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id`,r=`${r} ORDER BY createdat DESC`;let a=await t.query(r);if(a.rowCount>0)return a.rows;(0,s.notFound)()}catch(e){return t.end(),!1}}async function l(e){let t=await (0,n.C)();try{return await t.query({text:"update feedbacks set viewed = true where id = $1",values:[e]}),!0}catch(e){return t.end(),!1}}async function o(e,t){let r=await (0,n.C)(),a=await (0,c.getUserIdFromClerkId)(e);try{let e;e=t?`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where viewed=false and users.id=$1`:`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where users.id=$1`;let s={text:`${e} ORDER BY createdat DESC`,values:[a]};return e=`${e} ORDER BY createdat DESC`,(await r.query(s)).rows}catch(e){console.log("**************************"),console.log(e),(0,s.notFound)()}}(0,r(40618).h)([d,i,l,o]),(0,a.j)("8588b1a6efb9be2aea37318aaf81080f249e6819",d),(0,a.j)("40ea62831202c6461f26fac9e50464e838172c49",i),(0,a.j)("1a635e3ad0d4ba09b5fb7f9c957d16154a840671",l),(0,a.j)("b676c491d43455759d695393904c4b94ae2e9059",o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[377,42,913,621,341,512,709],()=>r(77632));module.exports=a})();