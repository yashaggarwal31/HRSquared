(()=>{var e={};e.id=699,e.ids=[699],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},78291:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>c.a,__next_app__:()=>f,originalPathname:()=>b,pages:()=>o,routeModule:()=>u,tree:()=>l}),t(82683),t(9457),t(32029),t(35866);var r=t(23191),s=t(88716),n=t(37922),c=t.n(n),d=t(95231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(a,i);let l=["",{children:["admin",{children:["feedback",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,82683)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\admin\\feedback\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9457)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\admin\\feedback\\page.tsx"],b="/admin/feedback/page",f={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/feedback/page",pathname:"/admin/feedback",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},30306:(e,a,t)=>{let r={"1a635e3ad0d4ba09b5fb7f9c957d16154a840671":()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.MarkViewed),"40ea62831202c6461f26fac9e50464e838172c49":()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.GetFeedbacks),"8588b1a6efb9be2aea37318aaf81080f249e6819":()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.addFeedback),b676c491d43455759d695393904c4b94ae2e9059:()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.GetUserFeedbacks),"258046a1e3860fa89174224a272f0cdf55590a87":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getAllUsersToAssign),"4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.userCreationFlow),"5929f08dcffcabce9ece9ec262c4d1da2aec33a2":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.updateUserRoleMapping),"8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUsersFormData),a448f998d28c1535f4ba9b2d14794207c3b56e92:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.createUser),bfb948864d3a9223fe1b23007ea4ecc247e7419e:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUserFromDb),c3a6fc5c59e2081ad90a6af0191920ab22d8d718:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.checkUserPermissionForSurvey),d16ec756617f7017d927ecb303b422c45c2b5f8f:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.checkUserExistence),deb9a62e45009688455aa5d6d724f09a72e9c0c6:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUserIdFromClerkId),ef8258559ec09924b33df9cdb206b83c322e79bf:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getAllUsers),f7abf20a8088752418c2e27ab26067e3f68fe53d:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUserById)};async function s(e,...a){return(await r[e]()).apply(null,a)}e.exports={"1a635e3ad0d4ba09b5fb7f9c957d16154a840671":s.bind(null,"1a635e3ad0d4ba09b5fb7f9c957d16154a840671"),"40ea62831202c6461f26fac9e50464e838172c49":s.bind(null,"40ea62831202c6461f26fac9e50464e838172c49"),"8588b1a6efb9be2aea37318aaf81080f249e6819":s.bind(null,"8588b1a6efb9be2aea37318aaf81080f249e6819"),b676c491d43455759d695393904c4b94ae2e9059:s.bind(null,"b676c491d43455759d695393904c4b94ae2e9059"),"258046a1e3860fa89174224a272f0cdf55590a87":s.bind(null,"258046a1e3860fa89174224a272f0cdf55590a87"),"4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77":s.bind(null,"4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77"),"5929f08dcffcabce9ece9ec262c4d1da2aec33a2":s.bind(null,"5929f08dcffcabce9ece9ec262c4d1da2aec33a2"),"8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7":s.bind(null,"8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7"),a448f998d28c1535f4ba9b2d14794207c3b56e92:s.bind(null,"a448f998d28c1535f4ba9b2d14794207c3b56e92"),bfb948864d3a9223fe1b23007ea4ecc247e7419e:s.bind(null,"bfb948864d3a9223fe1b23007ea4ecc247e7419e"),c3a6fc5c59e2081ad90a6af0191920ab22d8d718:s.bind(null,"c3a6fc5c59e2081ad90a6af0191920ab22d8d718"),d16ec756617f7017d927ecb303b422c45c2b5f8f:s.bind(null,"d16ec756617f7017d927ecb303b422c45c2b5f8f"),deb9a62e45009688455aa5d6d724f09a72e9c0c6:s.bind(null,"deb9a62e45009688455aa5d6d724f09a72e9c0c6"),ef8258559ec09924b33df9cdb206b83c322e79bf:s.bind(null,"ef8258559ec09924b33df9cdb206b83c322e79bf"),f7abf20a8088752418c2e27ab26067e3f68fe53d:s.bind(null,"f7abf20a8088752418c2e27ab26067e3f68fe53d")}},89355:(e,a,t)=>{Promise.resolve().then(t.bind(t,75598))},46242:(e,a,t)=>{"use strict";Object.defineProperty(a,"$",{enumerable:!0,get:function(){return s}});let r=t(15424);function s(e){let{createServerReference:a}=t(56493);return a(e,r.callServer)}},75598:(e,a,t)=>{"use strict";t.d(a,{default:()=>f});var r=t(10326),s=t(17577),n=t(27324),c=t(7613);async function d(e){try{console.log("number",e);let a=await (0,c.Cg)(e);console.log(a)}catch(e){}}let i=function({feedback:e}){let[a,t]=(0,s.useState)(e.viewed),[c,i]=(0,s.useState)(!1),{id:l,title:o,description:b,createdby:f,createdat:u,isanon:h}=e;async function m(){if(!c)try{console.log(o,"marking as viewed"),i(!0),await d(l),i(!1),t(!0)}catch(e){i(!1),console.log(e)}}return(0,r.jsxs)("div",{className:"mb-4 w-4/6 rounded-md  p-4 shadow-lg",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:o}),r.jsx("p",{className:"text-m rounded-lg bg-slate-200 px-2 py-1 text-black shadow-md",children:h?"Anonymous":f})]}),r.jsx("p",{className:"mb-2 text-base",children:b}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-500",children:(0,n.i)(u)}),!a&&r.jsx("button",{disabled:c,onClick:m,className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",children:c?"Marking...":"Mark as Viewed"})||r.jsx("p",{className:"rounded-3xl bg-green-500 px-2 py-1 text-white",children:"Viewed"})]})]})};var l=t(25988),o=t(36204);let b=(e,a,t)=>{let r=(a-1)*t;return e.slice(r,r+t)},f=function({feedbackData:e}){console.log("feed",e);let[a,t]=(0,s.useState)(1),[n,c]=(0,s.useState)(!1),[d,f]=(0,s.useState)(e),[u,h]=(0,s.useState)(e),[m,p]=(0,s.useState)(e);return(0,r.jsxs)("div",{className:" h-screen flex flex-col",children:[r.jsx("div",{className:"w-4/6 ml-auto mr-auto mt-4 mb-2",children:r.jsx(o.Z,{onChangeCallback:e=>{if(console.log("->",e),0===e.trim().length){p(()=>b(d,a,5));return}let t=d.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()));console.log("fil",t),console.log("->",e),h(t),p(()=>b(u,a,5))},placeholder:"Search by Title"})}),n?r.jsx("div",{children:"Loading..."}):(0,r.jsxs)("div",{className:"h-100 flex  flex-col items-center px-4 py-2",children:[m.map((e,a)=>r.jsx(i,{feedback:e},a)),r.jsx(l.Z,{items:u.length,currentPage:a,pageSize:5,onPageChange:e=>{t(e)}})]})]})}},36204:(e,a,t)=>{"use strict";t.d(a,{Z:()=>n});var r=t(10326),s=t(17577);let n=({onChangeCallback:e,placeholder:a})=>{let[t,n]=(0,s.useState)("");return(0,r.jsxs)("div",{className:"flex items-center gap-2 border-2 border-gray-300 rounded-full overflow-hidden px-2 has-[:focus]:border-sky-300",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"25px",height:"25px",children:r.jsx("path",{d:"M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"})}),r.jsx("input",{className:" bg-white h-[2rem] px-5 rounded-lg text-sm focus:outline-none w-full",type:"search",value:t,onChange:a=>{let t=a.target.value;n(t),e&&e(t)},name:"search",placeholder:a})]})}},25988:(e,a,t)=>{"use strict";t.d(a,{Z:()=>c});var r=t(10326),s=t(71627),n=t.n(s);let c=({items:e,pageSize:a,currentPage:t,onPageChange:s})=>{console.log("items -> ",e);let c=Math.ceil(e/a);if(1===c)return null;let d=Array.from({length:c},(e,a)=>a+1);return r.jsx("div",{children:r.jsx("ul",{className:n().pagination,children:d.map(e=>r.jsx("li",{className:e===t?n().pageItemActive:n().pageItem,onClick:()=>s(e),children:r.jsx("a",{className:n().pageLink,children:e})},e))})})}},27324:(e,a,t)=>{"use strict";t.d(a,{i:()=>r});let r=e=>{if(!e)return"";let a=new Date(e),t=a.getUTCMonth()+1,r=a.getUTCFullYear(),s=a.getUTCDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][t-1];return`${n} ${s}, ${r}`}},7613:(e,a,t)=>{"use strict";t.d(a,{Cg:()=>n,cx:()=>s}),t(15424);var r=t(46242);(0,r.$)("b676c491d43455759d695393904c4b94ae2e9059");var s=(0,r.$)("8588b1a6efb9be2aea37318aaf81080f249e6819");(0,r.$)("40ea62831202c6461f26fac9e50464e838172c49");var n=(0,r.$)("1a635e3ad0d4ba09b5fb7f9c957d16154a840671")},71627:e=>{e.exports={container:"Pagination_container__K2pXc",pagination:"Pagination_pagination__YO7tt",pageLink:"Pagination_pageLink__Dbtuc",pageItem:"Pagination_pageItem__S74oz",pageItemActive:"Pagination_pageItemActive__tUfHZ"}},82683:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var r=t(19510),s=t(71159),n=t(68570);let c=(0,n.createProxy)(String.raw`D:\EX2Projects\CurrentProjects\HRSQUARED\HRSquared\src\app\admin\feedback\FeedbackAdminList.tsx`),{__esModule:d,$$typeof:i}=c;c.default;let l=(0,n.createProxy)(String.raw`D:\EX2Projects\CurrentProjects\HRSQUARED\HRSquared\src\app\admin\feedback\FeedbackAdminList.tsx#default`);var o=t(47671);async function b(){let e=await (0,o.GetFeedbacks)();return r.jsx(l,{feedbackData:e})}function f(){return r.jsx("div",{children:r.jsx(s.Suspense,{fallback:(0,r.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",r.jsx("h3",{children:"Fetching Feedbacks ..."})," "]}),children:r.jsx(b,{})})})}},9457:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d,metadata:()=>c});var r=t(19510),s=t(33266),n=t(24890);let c={title:"Next.js",description:"Generated by Next.js"};function d({children:e}){return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{children:[r.jsx(n.ZP,{}),e,r.jsx(s.Z,{})]})})}},47671:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GetFeedbacks:()=>i,GetUserFeedbacks:()=>o,MarkViewed:()=>l,addFeedback:()=>d});var r=t(24330);t(60166);var s=t(58585),n=t(24925),c=t(92153);async function d(e){console.log("hello add feedback"),console.log(e);let a=await (0,c.getUserIdFromClerkId)(e.userId),t=await (0,n.C)();try{let r={text:"insert into feedbacks (title, description, createdby, isanon) values ($1, $2, $3, $4)",values:[e.title,e.description,a,e.anonymous]};return await t.query(r),!0}catch(e){return console.log(e),t.end(),!1}}async function i(e){let a=await (0,n.C)();try{let t;t=e?`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where viewed=false`:`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id`,t=`${t} ORDER BY createdat DESC`;let r=await a.query(t);if(r.rowCount>0)return r.rows;(0,s.notFound)()}catch(e){return a.end(),!1}}async function l(e){let a=await (0,n.C)();try{return await a.query({text:"update feedbacks set viewed = true where id = $1",values:[e]}),!0}catch(e){return a.end(),!1}}async function o(e,a){let t=await (0,n.C)(),r=await (0,c.getUserIdFromClerkId)(e);try{let e;e=a?`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where viewed=false and users.id=$1`:`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where users.id=$1`;let s={text:`${e} ORDER BY createdat DESC`,values:[r]};return e=`${e} ORDER BY createdat DESC`,(await t.query(s)).rows}catch(e){console.log("**************************"),console.log(e),(0,s.notFound)()}}(0,t(40618).h)([d,i,l,o]),(0,r.j)("8588b1a6efb9be2aea37318aaf81080f249e6819",d),(0,r.j)("40ea62831202c6461f26fac9e50464e838172c49",i),(0,r.j)("1a635e3ad0d4ba09b5fb7f9c957d16154a840671",l),(0,r.j)("b676c491d43455759d695393904c4b94ae2e9059",o)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[377,42,913,621,341,512,709],()=>t(78291));module.exports=r})();