(()=>{var e={};e.id=699,e.ids=[699],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},28076:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>b,pages:()=>o,routeModule:()=>u,tree:()=>l}),t(82683),t(9457),t(32029),t(35866);var s=t(23191),r=t(88716),d=t(37922),n=t.n(d),c=t(95231),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(a,i);let l=["",{children:["admin",{children:["feedback",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,82683)),"C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\admin\\feedback\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9457)),"C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\admin\\feedback\\page.tsx"],b="/admin/feedback/page",f={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/feedback/page",pathname:"/admin/feedback",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},29615:(e,a,t)=>{let s={"481ef188fb9d8fd9d53b1f3aa02fb914ce5bcbfb":()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.addFeedback),"52ee6ceed72bf833aec2950c2452db2ee07ab561":()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.GetFeedbacks),"547d5aedb246b08746d219ba85522d837c74a18b":()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.MarkViewed),acdcae45394cfc0da999fe6884a4da2664cda181:()=>Promise.resolve().then(t.bind(t,47671)).then(e=>e.GetUserFeedbacks),"08893cc7b3568853778612b7009d9e0295b3d182":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUserIdFromClerkId),"3b9f5381daf25ec350eef41c4522b870a90edcf5":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.createUser),"605fbd3cfa84bd30ec8d022f83bc673e1209f363":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.checkUserPermissionForSurvey),"9e55bf1e1fc4c00ed7818ab82e1f39f596a869a4":()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.userCreationFlow),ad3fa980eb29ddc5515b6c81a8dd845a5595ed1c:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getAllUsers),ae096b2f57a48498d952cabcd0d481c0bea6f80f:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.checkUserExistence),c3efeaa8e756ca8251d4d7c13b18b0fc263ca573:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getAllUsersToAssign),c44f796dddee508d2690c0a56bfa35105b4ef06e:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUsersFormData),c5c87f63730f10b32f23532552f606c5ce927141:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.updateUserRoleMapping),e2140fb79d9b1206cc77a6622598a189ef464d00:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUserById),e2efa07395f6b5eef3b6d2f6bae60b4780d1f3ed:()=>Promise.resolve().then(t.bind(t,92153)).then(e=>e.getUserFromDb)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"481ef188fb9d8fd9d53b1f3aa02fb914ce5bcbfb":r.bind(null,"481ef188fb9d8fd9d53b1f3aa02fb914ce5bcbfb"),"52ee6ceed72bf833aec2950c2452db2ee07ab561":r.bind(null,"52ee6ceed72bf833aec2950c2452db2ee07ab561"),"547d5aedb246b08746d219ba85522d837c74a18b":r.bind(null,"547d5aedb246b08746d219ba85522d837c74a18b"),acdcae45394cfc0da999fe6884a4da2664cda181:r.bind(null,"acdcae45394cfc0da999fe6884a4da2664cda181"),"08893cc7b3568853778612b7009d9e0295b3d182":r.bind(null,"08893cc7b3568853778612b7009d9e0295b3d182"),"3b9f5381daf25ec350eef41c4522b870a90edcf5":r.bind(null,"3b9f5381daf25ec350eef41c4522b870a90edcf5"),"605fbd3cfa84bd30ec8d022f83bc673e1209f363":r.bind(null,"605fbd3cfa84bd30ec8d022f83bc673e1209f363"),"9e55bf1e1fc4c00ed7818ab82e1f39f596a869a4":r.bind(null,"9e55bf1e1fc4c00ed7818ab82e1f39f596a869a4"),ad3fa980eb29ddc5515b6c81a8dd845a5595ed1c:r.bind(null,"ad3fa980eb29ddc5515b6c81a8dd845a5595ed1c"),ae096b2f57a48498d952cabcd0d481c0bea6f80f:r.bind(null,"ae096b2f57a48498d952cabcd0d481c0bea6f80f"),c3efeaa8e756ca8251d4d7c13b18b0fc263ca573:r.bind(null,"c3efeaa8e756ca8251d4d7c13b18b0fc263ca573"),c44f796dddee508d2690c0a56bfa35105b4ef06e:r.bind(null,"c44f796dddee508d2690c0a56bfa35105b4ef06e"),c5c87f63730f10b32f23532552f606c5ce927141:r.bind(null,"c5c87f63730f10b32f23532552f606c5ce927141"),e2140fb79d9b1206cc77a6622598a189ef464d00:r.bind(null,"e2140fb79d9b1206cc77a6622598a189ef464d00"),e2efa07395f6b5eef3b6d2f6bae60b4780d1f3ed:r.bind(null,"e2efa07395f6b5eef3b6d2f6bae60b4780d1f3ed")}},26750:(e,a,t)=>{Promise.resolve().then(t.bind(t,75598))},46242:(e,a,t)=>{"use strict";Object.defineProperty(a,"$",{enumerable:!0,get:function(){return r}});let s=t(15424);function r(e){let{createServerReference:a}=t(56493);return a(e,s.callServer)}},75598:(e,a,t)=>{"use strict";t.d(a,{default:()=>f});var s=t(10326),r=t(17577),d=t(27324),n=t(7613);async function c(e){try{console.log("number",e);let a=await (0,n.Cg)(e);console.log(a)}catch(e){}}let i=function({feedback:e}){let[a,t]=(0,r.useState)(e.viewed),[n,i]=(0,r.useState)(!1),{id:l,title:o,description:b,createdby:f,createdat:u,isanon:h}=e;async function p(){if(!n)try{console.log(o,"marking as viewed"),i(!0),await c(l),i(!1),t(!0)}catch(e){i(!1),console.log(e)}}return(0,s.jsxs)("div",{className:"mb-4 w-4/6 rounded-md  p-4 shadow-lg",children:[(0,s.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:o}),s.jsx("p",{className:"text-m rounded-lg bg-slate-200 px-2 py-1 text-black shadow-md",children:h?"Anonymous":f})]}),s.jsx("p",{className:"mb-2 text-base",children:b}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[s.jsx("p",{className:"text-sm text-gray-500",children:(0,d.i)(u)}),!a&&s.jsx("button",{disabled:n,onClick:p,className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",children:n?"Marking...":"Mark as Viewed"})||s.jsx("p",{className:"rounded-3xl bg-green-500 px-2 py-1 text-white",children:"Viewed"})]})]})};var l=t(25988),o=t(36204);let b=(e,a,t)=>{let s=(a-1)*t;return e.slice(s,s+t)},f=function({feedbackData:e}){console.log("feed",e);let[a,t]=(0,r.useState)(1),[d,n]=(0,r.useState)(!1),[c,f]=(0,r.useState)(e),[u,h]=(0,r.useState)(e),[p,m]=(0,r.useState)(e);return(0,s.jsxs)("div",{className:" h-screen flex flex-col",children:[s.jsx("div",{className:"w-4/6 ml-auto mr-auto mt-4 mb-2",children:s.jsx(o.Z,{onChangeCallback:e=>{if(console.log("->",e),0===e.trim().length){m(()=>b(c,a,5));return}let t=c.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()));console.log("fil",t),console.log("->",e),h(t),m(()=>b(u,a,5))},placeholder:"Search by Title"})}),d?s.jsx("div",{children:"Loading..."}):(0,s.jsxs)("div",{className:"h-100 flex  flex-col items-center px-4 py-2",children:[p.map((e,a)=>s.jsx(i,{feedback:e},a)),s.jsx(l.Z,{items:u.length,currentPage:a,pageSize:5,onPageChange:e=>{t(e)}})]})]})}},36204:(e,a,t)=>{"use strict";t.d(a,{Z:()=>d});var s=t(10326),r=t(17577);let d=({onChangeCallback:e,placeholder:a})=>{let[t,d]=(0,r.useState)("");return(0,s.jsxs)("div",{className:"flex items-center gap-2 border-2 border-gray-300 rounded-full overflow-hidden px-2 has-[:focus]:border-sky-300",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"25px",height:"25px",children:s.jsx("path",{d:"M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"})}),s.jsx("input",{className:" bg-white h-[2rem] px-5 rounded-lg text-sm focus:outline-none w-full",type:"search",value:t,onChange:a=>{let t=a.target.value;d(t),e&&e(t)},name:"search",placeholder:a})]})}},25988:(e,a,t)=>{"use strict";t.d(a,{Z:()=>n});var s=t(10326),r=t(71627),d=t.n(r);let n=({items:e,pageSize:a,currentPage:t,onPageChange:r})=>{console.log("items -> ",e);let n=Math.ceil(e/a);if(1===n)return null;let c=Array.from({length:n},(e,a)=>a+1);return s.jsx("div",{children:s.jsx("ul",{className:d().pagination,children:c.map(e=>s.jsx("li",{className:e===t?d().pageItemActive:d().pageItem,onClick:()=>r(e),children:s.jsx("a",{className:d().pageLink,children:e})},e))})})}},27324:(e,a,t)=>{"use strict";t.d(a,{i:()=>s});let s=e=>{if(!e)return"";let a=new Date(e),t=a.getUTCMonth()+1,s=a.getUTCFullYear(),r=a.getUTCDate(),d=["January","February","March","April","May","June","July","August","September","October","November","December"][t-1];return`${d} ${r}, ${s}`}},7613:(e,a,t)=>{"use strict";t.d(a,{Cg:()=>d,cx:()=>r}),t(15424);var s=t(46242);(0,s.$)("acdcae45394cfc0da999fe6884a4da2664cda181");var r=(0,s.$)("481ef188fb9d8fd9d53b1f3aa02fb914ce5bcbfb");(0,s.$)("52ee6ceed72bf833aec2950c2452db2ee07ab561");var d=(0,s.$)("547d5aedb246b08746d219ba85522d837c74a18b")},71627:e=>{e.exports={container:"Pagination_container__K2pXc",pagination:"Pagination_pagination__YO7tt",pageLink:"Pagination_pageLink__Dbtuc",pageItem:"Pagination_pageItem__S74oz",pageItemActive:"Pagination_pageItemActive__tUfHZ"}},82683:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(19510),r=t(71159),d=t(68570);let n=(0,d.createProxy)(String.raw`C:\Users\dhgupta\Desktop\HRSquared\src\app\admin\feedback\FeedbackAdminList.tsx`),{__esModule:c,$$typeof:i}=n;n.default;let l=(0,d.createProxy)(String.raw`C:\Users\dhgupta\Desktop\HRSquared\src\app\admin\feedback\FeedbackAdminList.tsx#default`);var o=t(47671);async function b(){let e=await (0,o.GetFeedbacks)();return s.jsx(l,{feedbackData:e})}function f(){return s.jsx("div",{children:s.jsx(r.Suspense,{fallback:(0,s.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",s.jsx("h3",{children:"Fetching Feedbacks ..."})," "]}),children:s.jsx(b,{})})})}},9457:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c,metadata:()=>n});var s=t(19510),r=t(33266),d=t(24890);let n={title:"Next.js",description:"Generated by Next.js"};function c({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{children:[s.jsx(d.ZP,{}),e,s.jsx(r.Z,{})]})})}},47671:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GetFeedbacks:()=>i,GetUserFeedbacks:()=>o,MarkViewed:()=>l,addFeedback:()=>c});var s=t(24330);t(60166);var r=t(58585),d=t(24925),n=t(92153);async function c(e){console.log("hello add feedback"),console.log(e);let a=await (0,n.getUserIdFromClerkId)(e.userId),t=await (0,d.C)();try{let s={text:"insert into feedbacks (title, description, createdby, isanon) values ($1, $2, $3, $4)",values:[e.title,e.description,a,e.anonymous]};return await t.query(s),!0}catch(e){return console.log(e),t.end(),!1}}async function i(e){let a=await (0,d.C)();try{let t;t=e?`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where viewed=false`:`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id`,t=`${t} ORDER BY createdat DESC`;let s=await a.query(t);if(s.rowCount>0)return s.rows;(0,r.notFound)()}catch(e){return a.end(),!1}}async function l(e){let a=await (0,d.C)();try{return await a.query({text:"update feedbacks set viewed = true where id = $1",values:[e]}),!0}catch(e){return a.end(),!1}}async function o(e,a){let t=await (0,d.C)(),s=await (0,n.getUserIdFromClerkId)(e);try{let e;e=a?`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where viewed=false and users.id=$1`:`select feedbacks.*,
            case
                when feedbacks.createdby is not null then users.username
                else NULL
            END AS createdby
            from feedbacks
            left join users
            on feedbacks.createdby = users.id where users.id=$1`;let r={text:`${e} ORDER BY createdat DESC`,values:[s]};return e=`${e} ORDER BY createdat DESC`,(await t.query(r)).rows}catch(e){console.log("**************************"),console.log(e),(0,r.notFound)()}}(0,t(40618).h)([c,i,l,o]),(0,s.j)("481ef188fb9d8fd9d53b1f3aa02fb914ce5bcbfb",c),(0,s.j)("52ee6ceed72bf833aec2950c2452db2ee07ab561",i),(0,s.j)("547d5aedb246b08746d219ba85522d837c74a18b",l),(0,s.j)("acdcae45394cfc0da999fe6884a4da2664cda181",o)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[377,42,913,621,341,512,354],()=>t(28076));module.exports=s})();