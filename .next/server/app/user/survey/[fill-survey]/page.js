(()=>{var e={};e.id=905,e.ids=[905],e.modules={98860:e=>{"use strict";e.exports=require("jsdom")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},89226:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(31578),r(59102),r(32029),r(35866);var s=r(23191),l=r(88716),i=r(37922),a=r.n(i),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["user",{children:["survey",{children:["[fill-survey]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,31578)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\user\\survey\\[fill-survey]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,59102)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\user\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\EX2Projects\\CurrentProjects\\HRSQUARED\\HRSquared\\src\\app\\user\\survey\\[fill-survey]\\page.tsx"],u="/user/survey/[fill-survey]/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/user/survey/[fill-survey]/page",pathname:"/user/survey/[fill-survey]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},87437:(e,t,r)=>{Promise.resolve().then(r.bind(r,43206))},43206:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(10326);r(17577);var l=r(89663),i=r(50689),a=r(45038),n=r(46226);function o({surveyFields:e,title:t,survey_img:r,surveyID:o}){let{user:c}=(0,a.aF)(),d=t.split("%!@");t=d[0];let u=d[1],x=async e=>{console.log("sending with response data: ",e);try{await fetch(i.WB,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>console.log("this was reached",e)).catch(e=>console.log(e))}catch(e){console.log("error while fetching:",e)}},m=1,p=0;return s.jsx("div",{id:"dom-form",className:"bg-slate-300 pt-4 font-Roboto",children:(0,s.jsxs)("form",{method:"post",className:"flex flex-col justify-center items-center gap-4 mt-12",onSubmit:function(e){let t=document.getElementById("submit-btn");t.innerHTML="Submitting",t.disabled=!0;let r=document.getElementById("dom-form");console.log(r),e.preventDefault();let s=e.target,l=[];for(let e of s.elements){if(!e.name)continue;let t=e.type,r="",i=s.querySelector(`label[htmlFor="${e.id}"]`);console.log("For this element, ",e,"Type is",e.type,"\n This si the label ",i),i&&(r=i.textContent.trim()),"checkbox"===t&&""==r&&(r=e.parentNode.parentNode.parentNode.firstChild.textContent),"select-one"==t&&(r=e.parentNode.firstChild.textContent);let a="",n="";switch(t){case"text":case"date":a=e.value,n=e.id;break;case"checkbox":case"radio":if(null===(a=e.checked?e.value:null))continue;n=e.id;break;case"select-one":a=e.options[e.selectedIndex].value,n=e.id;break;case"file":if(!e.files[0])continue;a=e.files[0].name,n=e.id}let o={label:r,type:t,answer:a,id:n};l.push(o)}if(r){let e=r.outerHTML;l.push({htmlString:e})}let i=JSON.stringify(l),a={user_id:c.id,survey_id:parseInt(o),response_data:i};console.log("are you going to submit Response",a),x(a),t.innerHTML="Submitted",console.log(i)},children:[r&&s.jsx("div",{className:"w-[55%] ",children:s.jsx(n.default,{width:"100",height:100,className:"w-[100%] h-[15rem] rounded-lg",src:r,alt:"A Survey Banner yash ... "})}),(0,s.jsxs)("div",{className:"w-[55%] rounded-lg border-t-4 border-blue-500 bg-white p-3 ",children:[s.jsx("div",{className:"text-2xl flex  items-center ",children:s.jsx("label",{className:"my-8 text-left text-2xl outline-none border-b",children:t})}),s.jsx("div",{className:" text-xl text-center flex justify-center items-center",children:s.jsx("textarea",{className:"w-[100%] outline-none text-sm",placeholder:"Survey Description",value:u})})]}),e&&e.map(e=>(0,s.jsxs)("div",{className:"w-[55%] rounded-lg border-l-4 border-blue-500 bg-white p-3",children:[e.type===l.U.TEXTINPUT&&(0,s.jsxs)("div",{className:"flex flex-col ",children:[(0,s.jsxs)("label",{htmlFor:m.toString(),className:"mb-3 text-lg",children:[e.label," "]}),s.jsx("input",{id:(m++).toString(),name:"TextField",placeholder:"Short answer"})]}),e.type==l.U.DROPDOWN&&(0,s.jsxs)("div",{className:"flex flex-col ",children:[s.jsx("label",{className:"mb-3 text-lg",children:e.label}),(0,s.jsxs)("select",{id:(m++).toString(),name:"DropDown",className:"w-[40%] rounded-md bg-slate-100 px-4 py-4 outline-none",children:[s.jsx("option",{className:"p-10",children:"Choose your pick "}),e.options.map(e=>s.jsx("option",{className:"p-10",children:e},1))]})]}),e.type==l.U.CHECKBOX&&(0,s.jsxs)("div",{className:"flex flex-col ",children:[(0,s.jsxs)("p",{id:"checkbox-label",className:"mb-3 text-lg",children:[e.label," "]}),s.jsx("div",{className:"flex flex-col ",children:e.options?.map(t=>s.jsxs("div",{className:"align-center flex gap-4",children:[s.jsx("input",{id:(m++).toString(),value:t,name:e.label,type:"checkbox"}),s.jsxs("label",{children:[t," "]})]},0+1))})]}),e.type==l.U.FILEUPLOAD&&(0,s.jsxs)("div",{className:"flex flex-col ",children:[s.jsx("label",{htmlFor:m.toString(),className:"mb-3 text-lg",children:e.label}),s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("input",{id:(m++).toString(),name:"myfile",type:"file",className:"w-72 max-w-full p-1.5 bg-white text-gray-800 rounded-lg border border-gray-500 file:mr-5 file:border-none file:bg-blue-800 file:px-5 file:py-2 file:rounded-lg file:text-white file:cursor-pointer file:hover:bg-blue-600"})})]}),e.type==l.U.DATE&&(0,s.jsxs)("div",{className:"flex flex-col ",children:[(0,s.jsxs)("label",{htmlFor:m.toString(),className:"mb-3 text-lg",children:[e.label," "]}),(0,s.jsxs)("div",{className:"relative max-w-sm",children:[s.jsx("div",{className:"pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3.5",children:s.jsx("svg",{className:"h-4 w-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),s.jsx("input",{name:"Date",type:"date",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 ps-10 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",placeholder:"Select date",id:(m++).toString()})]})]}),e.type==l.U.MATRIX&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"",children:[e.label," "]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("table",{className:"w-[80%]",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{className:"text-center",children:[s.jsx("th",{children:" "}),e.matrixColumn?.map(e=>s.jsx("th",{children:e},p++))]}),e.matrixRow?.map(t=>s.jsxs("tr",{children:[s.jsx("td",{children:t}),e.matrixColumn?.map(e=>s.jsx("td",{className:"text-center",children:s.jsx("input",{type:"radio",name:t+"1",id:(m++).toString(),value:e})},p++))]},p++))]})})})]})]},0)),s.jsx("button",{id:"submit-btn",className:"mb-2 me-2 rounded-lg bg-gradient-to-br from-purple-600 to-blue-500 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gradient-to-bl focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",type:"submit",children:"Submit Response"})]})})}},89663:(e,t,r)=>{"use strict";var s;r.d(t,{U:()=>s}),function(e){e[e.TEXTINPUT=0]="TEXTINPUT",e[e.DROPDOWN=1]="DROPDOWN",e[e.CHECKBOX=2]="CHECKBOX",e[e.DATE=3]="DATE",e[e.MATRIX=4]="MATRIX",e[e.FILEUPLOAD=5]="FILEUPLOAD"}(s||(s={}))},50689:(e,t,r)=>{"use strict";r.d(t,{Is:()=>s,WB:()=>l});let s="/api/survey/admin/createsurvey",l="/api/survey/fillsurvey"},59102:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var s=r(19510),l=r(24890),i=r(33266);let a={title:"Next.js",description:"Generated by Next.js"};function n({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{children:[s.jsx(l.ZP,{}),e,s.jsx(i.Z,{})]})})}},31578:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(19510),l=r(71159),i=r(68570);let a=(0,i.createProxy)(String.raw`D:\EX2Projects\CurrentProjects\HRSQUARED\HRSquared\src\app\user\survey\[fill-survey]\FormFiller.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let c=(0,i.createProxy)(String.raw`D:\EX2Projects\CurrentProjects\HRSQUARED\HRSquared\src\app\user\survey\[fill-survey]\FormFiller.tsx#default`);var d=r(35592),u=r(35686),x=r(92153);async function m({surveyID:e,userId:t}){if(console.log(e),console.log("space"),console.log(t),!await (0,x.checkUserPermissionForSurvey)(e,t))return console.log("does not have permission"),s.jsx(s.Fragment,{children:s.jsx("section",{className:"bg-white dark:bg-gray-900",children:s.jsx("div",{className:"mx-auto max-w-screen-xl px-4 py-8 lg:px-6 lg:py-16",children:(0,s.jsxs)("div",{className:"mx-auto max-w-screen-sm text-center",children:[s.jsx("h1",{className:"dark:text-primary-500 mb-4 text-7xl font-extrabold tracking-tight text-blue-600 lg:text-9xl",children:"403"}),s.jsx("p",{className:"mb-4 text-3xl font-bold tracking-tight text-gray-900 md:text-4xl dark:text-white",children:"Access Denied"}),s.jsx("p",{className:"mb-4 text-lg font-light text-gray-500 dark:text-gray-400",children:"Sorry, you dont seem to have permission to view this survey"})]})})})});console.log("has permission");let r=await (0,d.getSurveyById)(e),l=r[0].surveyfields,i=r[0].title,a=r[0].survey_img;return s.jsx(s.Fragment,{children:s.jsx(c,{surveyFields:l,title:i,survey_img:a,surveyID:e})})}function p({params:e}){let t=e["fill-survey"],{userId:r}=(0,u.I)();return s.jsx(s.Fragment,{children:s.jsx(l.Suspense,{fallback:(0,s.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",s.jsx("h3",{children:"Fetching Survey ..."})," "]}),children:s.jsx(m,{surveyID:t,userId:r})})})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[377,42,913,621,341,512,709,880],()=>r(89226));module.exports=s})();