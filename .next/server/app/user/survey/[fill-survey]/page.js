(()=>{var e={};e.id=905,e.ids=[905],e.modules={98860:e=>{"use strict";e.exports=require("jsdom")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},3208:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(31578),s(59102),s(32029),s(35866);var r=s(23191),l=s(88716),a=s(37922),i=s.n(a),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["user",{children:["survey",{children:["[fill-survey]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31578)),"C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\user\\survey\\[fill-survey]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59102)),"C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\user\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\dhgupta\\Desktop\\HRSquared\\src\\app\\user\\survey\\[fill-survey]\\page.tsx"],u="/user/survey/[fill-survey]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/user/survey/[fill-survey]/page",pathname:"/user/survey/[fill-survey]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6333:(e,t,s)=>{Promise.resolve().then(s.bind(s,43206))},43206:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(10326);s(17577);var l=s(89663),a=s(50689),i=s(45038),n=s(46226);function o({surveyFields:e,title:t,survey_img:s,surveyID:o}){let{user:c}=(0,i.aF)(),d=t.split("%!@");t=d[0];let u=d[1],x=async e=>{console.log("sending with response data: ",e);try{await fetch(a.WB,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>console.log("this was reached",e)).catch(e=>console.log(e))}catch(e){console.log("error while fetching:",e)}},m=1,p=0;return r.jsx("div",{id:"dom-form",className:"bg-slate-300 pt-4 font-Roboto",children:(0,r.jsxs)("form",{method:"post",className:"flex flex-col justify-center items-center gap-4 mt-12",onSubmit:function(e){let t=document.getElementById("submit-btn");t.innerHTML="Submitting",t.disabled=!0;let s=document.getElementById("dom-form");console.log(s),e.preventDefault();let r=e.target,l=[];for(let e of r.elements){if(!e.name)continue;let t=e.type,s="",a=r.querySelector(`label[htmlFor="${e.id}"]`);console.log("For this element, ",e,"Type is",e.type,"\n This si the label ",a),a&&(s=a.textContent.trim()),"checkbox"===t&&""==s&&(s=e.parentNode.parentNode.parentNode.firstChild.textContent),"select-one"==t&&(s=e.parentNode.firstChild.textContent);let i="",n="";switch(t){case"text":case"date":i=e.value,n=e.id;break;case"checkbox":case"radio":if(null===(i=e.checked?e.value:null))continue;n=e.id;break;case"select-one":i=e.options[e.selectedIndex].value,n=e.id;break;case"file":if(!e.files[0])continue;i=e.files[0].name,n=e.id}let o={label:s,type:t,answer:i,id:n};l.push(o)}if(s){let e=s.outerHTML;l.push({htmlString:e})}let a=JSON.stringify(l),i={user_id:c.id,survey_id:parseInt(o),response_data:a};console.log("are you going to submit Response",i),x(i),t.innerHTML="Submitted",console.log(a)},children:[s&&r.jsx("div",{className:"w-[55%] ",children:r.jsx(n.default,{width:"100",height:100,className:"w-[100%] h-[15rem] rounded-lg",src:s,alt:"A Survey Banner yash ... "})}),(0,r.jsxs)("div",{className:"w-[55%] rounded-lg border-t-4 border-blue-500 bg-white p-3 ",children:[r.jsx("div",{className:"text-2xl flex  items-center ",children:r.jsx("label",{className:"my-8 text-left text-2xl outline-none border-b",children:t})}),r.jsx("div",{className:" text-xl text-center flex justify-center items-center",children:r.jsx("textarea",{className:"w-[100%] outline-none text-sm",placeholder:"Survey Description",value:u})})]}),e&&e.map(e=>(0,r.jsxs)("div",{className:"w-[55%] rounded-lg border-l-4 border-blue-500 bg-white p-3",children:[e.type===l.U.TEXTINPUT&&(0,r.jsxs)("div",{className:"flex flex-col ",children:[(0,r.jsxs)("label",{htmlFor:m.toString(),className:"mb-3 text-lg",children:[e.label," "]}),r.jsx("input",{id:(m++).toString(),name:"TextField",placeholder:"Short answer"})]}),e.type==l.U.DROPDOWN&&(0,r.jsxs)("div",{className:"flex flex-col ",children:[r.jsx("label",{className:"mb-3 text-lg",children:e.label}),(0,r.jsxs)("select",{id:(m++).toString(),name:"DropDown",className:"w-[40%] rounded-md bg-slate-100 px-4 py-4 outline-none",children:[r.jsx("option",{className:"p-10",children:"Choose your pick "}),e.options.map(e=>r.jsx("option",{className:"p-10",children:e},1))]})]}),e.type==l.U.CHECKBOX&&(0,r.jsxs)("div",{className:"flex flex-col ",children:[(0,r.jsxs)("p",{id:"checkbox-label",className:"mb-3 text-lg",children:[e.label," "]}),r.jsx("div",{className:"flex flex-col ",children:e.options?.map(t=>r.jsxs("div",{className:"align-center flex gap-4",children:[r.jsx("input",{id:(m++).toString(),value:t,name:e.label,type:"checkbox"}),r.jsxs("label",{children:[t," "]})]},0+1))})]}),e.type==l.U.FILEUPLOAD&&(0,r.jsxs)("div",{className:"flex flex-col ",children:[r.jsx("label",{htmlFor:m.toString(),className:"mb-3 text-lg",children:e.label}),r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("input",{id:(m++).toString(),name:"myfile",type:"file",className:"w-72 max-w-full p-1.5 bg-white text-gray-800 rounded-lg border border-gray-500 file:mr-5 file:border-none file:bg-blue-800 file:px-5 file:py-2 file:rounded-lg file:text-white file:cursor-pointer file:hover:bg-blue-600"})})]}),e.type==l.U.DATE&&(0,r.jsxs)("div",{className:"flex flex-col ",children:[(0,r.jsxs)("label",{htmlFor:m.toString(),className:"mb-3 text-lg",children:[e.label," "]}),(0,r.jsxs)("div",{className:"relative max-w-sm",children:[r.jsx("div",{className:"pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3.5",children:r.jsx("svg",{className:"h-4 w-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),r.jsx("input",{name:"Date",type:"date",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 ps-10 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",placeholder:"Select date",id:(m++).toString()})]})]}),e.type==l.U.MATRIX&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"",children:[e.label," "]}),r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("table",{className:"w-[80%]",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{className:"text-center",children:[r.jsx("th",{children:" "}),e.matrixColumn?.map(e=>r.jsx("th",{children:e},p++))]}),e.matrixRow?.map(t=>r.jsxs("tr",{children:[r.jsx("td",{children:t}),e.matrixColumn?.map(e=>r.jsx("td",{className:"text-center",children:r.jsx("input",{type:"radio",name:t+"1",id:(m++).toString(),value:e})},p++))]},p++))]})})})]})]},0)),r.jsx("button",{id:"submit-btn",className:"mb-2 me-2 rounded-lg bg-gradient-to-br from-purple-600 to-blue-500 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gradient-to-bl focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",type:"submit",children:"Submit Response"})]})})}},89663:(e,t,s)=>{"use strict";var r;s.d(t,{U:()=>r}),function(e){e[e.TEXTINPUT=0]="TEXTINPUT",e[e.DROPDOWN=1]="DROPDOWN",e[e.CHECKBOX=2]="CHECKBOX",e[e.DATE=3]="DATE",e[e.MATRIX=4]="MATRIX",e[e.FILEUPLOAD=5]="FILEUPLOAD"}(r||(r={}))},50689:(e,t,s)=>{"use strict";s.d(t,{Is:()=>r,WB:()=>l});let r="/api/survey/admin/createsurvey",l="/api/survey/fillsurvey"},59102:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var r=s(19510),l=s(24890),a=s(33266);let i={title:"Next.js",description:"Generated by Next.js"};function n({children:e}){return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{children:[r.jsx(l.ZP,{}),e,r.jsx(a.Z,{})]})})}},31578:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(19510),l=s(71159),a=s(68570);let i=(0,a.createProxy)(String.raw`C:\Users\dhgupta\Desktop\HRSquared\src\app\user\survey\[fill-survey]\FormFiller.tsx`),{__esModule:n,$$typeof:o}=i;i.default;let c=(0,a.createProxy)(String.raw`C:\Users\dhgupta\Desktop\HRSquared\src\app\user\survey\[fill-survey]\FormFiller.tsx#default`);var d=s(35592),u=s(35686),x=s(92153);async function m({surveyID:e,userId:t}){if(console.log(e),console.log("space"),console.log(t),!await (0,x.checkUserPermissionForSurvey)(e,t))return console.log("does not have permission"),r.jsx(r.Fragment,{children:r.jsx("section",{className:"bg-white dark:bg-gray-900",children:r.jsx("div",{className:"mx-auto max-w-screen-xl px-4 py-8 lg:px-6 lg:py-16",children:(0,r.jsxs)("div",{className:"mx-auto max-w-screen-sm text-center",children:[r.jsx("h1",{className:"dark:text-primary-500 mb-4 text-7xl font-extrabold tracking-tight text-blue-600 lg:text-9xl",children:"403"}),r.jsx("p",{className:"mb-4 text-3xl font-bold tracking-tight text-gray-900 md:text-4xl dark:text-white",children:"Access Denied"}),r.jsx("p",{className:"mb-4 text-lg font-light text-gray-500 dark:text-gray-400",children:"Sorry, you dont seem to have permission to view this survey"})]})})})});console.log("has permission");let s=await (0,d.getSurveyById)(e),l=s[0].surveyfields,a=s[0].title,i=s[0].survey_img;return r.jsx(r.Fragment,{children:r.jsx(c,{surveyFields:l,title:a,survey_img:i,surveyID:e})})}function p({params:e}){let t=e["fill-survey"],{userId:s}=(0,u.I)();return r.jsx(r.Fragment,{children:r.jsx(l.Suspense,{fallback:(0,r.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",r.jsx("h3",{children:"Fetching Survey ..."})," "]}),children:r.jsx(m,{surveyID:t,userId:s})})})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[377,42,913,621,341,512,354,717],()=>s(3208));module.exports=r})();