(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{17141:function(e,t,s){Promise.resolve().then(s.bind(s,84055))},58064:function(e,t,s){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return l}});let a=s(74590);function l(e){let{createServerReference:t}=s(6671);return t(e,a.callServer)}},84055:function(e,t,s){"use strict";s.d(t,{default:function(){return h}});var a,l,n=s(57437),c=s(2265),r=s(26615),i=s(73930),d=s(35123),o=s(30999),u=s(43561);let x=(e,t,s)=>{let a=(t-1)*s;return e.slice(a,a+s)};function f(e){let{surveyData:t}=e;console.log("SURVEY DATA",t);let[s,a]=(0,c.useState)(1),[l,r]=(0,c.useState)([{}]),[f,h]=(0,c.useState)(""),[b,m]=(0,c.useState)(t),[g,p]=(0,c.useState)([]),[j,v]=(0,c.useState)(!0),[y,N]=(0,c.useState)(null),[w,k]=(0,c.useState)(null),[C,S]=(0,c.useState)([]);async function _(e,t){let s=document.getElementById(t);s&&(s.innerHTML="Assigning...");try{await (0,u.dQ)(e,t),k(null),location.reload()}catch(e){}}function D(e){let{ticket:t}=e;return(0,n.jsx)("span",{className:"cursor-pointer rounded-lg bg-slate-500 px-2 py-1 text-white",onClick:()=>k(t),children:"Assign"})}(0,c.useEffect)(()=>{m(t),a(1),h("")},[t]),(0,c.useEffect)(()=>{(async()=>{try{let e=await (0,o.P$)();S(e),v(!1)}catch(e){}})()},[]),(0,c.useEffect)(()=>{p(x(t,s,11))},[t]),(0,c.useEffect)(()=>{let e=[];console.log("next page",e=""==f?x(t,s,11):x(l,s,11)),p(e)},[s,f]);let O=e=>{if(e==f){r([{}]),h("");return}h(e);let t=b.filter(t=>t.status==e);r(t),a(1),p(x(t,s,11))},A=()=>e=>{N(null),k(null),e.preventDefault()};async function $(e,t,s){let a=document.getElementById(e);a&&(a.innerHTML="Marking...");try{await (0,u.Nf)(t,s),N(null),location.reload()}catch(e){console.log(e)}}return(0,n.jsx)("div",{className:"",children:j?(0,n.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",(0,n.jsx)("h3",{children:"Fetching Tickets ..."})," "]}):(0,n.jsxs)("div",{children:[y&&(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex flex-col items-center justify-center bg-slate-500 bg-opacity-70 ",children:(0,n.jsxs)("div",{className:"relative rounded-md bg-white ",children:[(0,n.jsx)("div",{className:"absolute -right-3 -top-3  rounded-full bg-slate-600 px-3 py-1  text-white",children:(0,n.jsx)("button",{onClick:A(),children:"X"})}),(0,n.jsx)("div",{className:"flex w-fit max-w-sm flex-col items-center justify-center ",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 ",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4  rounded-t-md bg-indigo-500 px-7 py-5 text-white",children:[(0,n.jsxs)("div",{children:["#",y.ticket_id]}),(0,n.jsx)("div",{className:"text-2xl",children:y.title}),(0,n.jsx)("div",{className:"".concat("Open"==y.status?"bg-red-500":"Resolved"==y.status?"bg-green-500 ":"bg-yellow-500 ","  rounded-full px-2 py-1 text-sm text-white"),children:y.status})]}),(0,n.jsx)("div",{className:"px-7  text-lg",children:y.description}),(0,n.jsxs)("div",{className:" px-7 py-5",children:[(0,n.jsxs)("div",{className:"bg-gray text-sm text-zinc-400",children:["Opened at : ",new Date(y.createdat).toLocaleString()]}),"Open"==y.status?(0,n.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,n.jsx)("button",{id:"markAsClosed",className:"mt-2 rounded-md bg-black px-4 py-2 text-center text-white",onClick:()=>$("markAsClosed",y.ticket_id,4),children:"Mark Resolved"}),(0,n.jsx)("button",{id:"markAsAddressed",className:"mt-2 rounded-md bg-black px-4 py-2 text-center text-white",onClick:()=>$("markAsAddressed",y.ticket_id,5),children:"Mark being addressed"})]}):"Resolved"==y.status?(0,n.jsxs)("div",{className:"bg-gray text-sm text-zinc-400",children:["Closed at : ",new Date(y.closedat).toLocaleString()]}):(0,n.jsx)("div",{className:"flex justify-center gap-4",children:(0,n.jsx)("button",{id:"markAsClosed",className:"mt-2 rounded-md bg-black px-4 py-2 text-center text-white",onClick:()=>$("markAsClosed",y.ticket_id,4),children:"Mark Resolved"})})]})]})})]})}),w&&(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 min-w-96 flex flex-col items-center justify-center bg-slate-500 bg-opacity-70 ",children:(0,n.jsxs)("div",{className:"relative m-10 rounded-md bg-white",children:[(0,n.jsx)("div",{className:" absolute -right-3 -top-3  rounded-full bg-slate-600 px-3 py-1  text-white",children:(0,n.jsx)("button",{onClick:A(),children:"X"})}),(0,n.jsx)("div",{className:"flex w-fit max-w-sm flex-col items-center justify-center ",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 ",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 rounded-t-md  bg-indigo-500 px-7 py-5 text-white",children:[(0,n.jsxs)("div",{children:["#",w.ticket_id]}),(0,n.jsx)("div",{className:"text-2xl",children:w.title})]}),(0,n.jsx)("div",{className:"text-lg"}),(0,n.jsx)("div",{className:"scroll h-96 min-w-full overflow-auto px-5 pb-2 ",children:C.map(e=>(0,n.jsxs)("div",{className:" mb-2 grid cursor-pointer items-center overflow-hidden rounded-[10px] bg-white py-2.5 pl-2.5 pr-[30px] shadow-[0_5px_7px_-1px_rgba(51,51,51,0.23)] hover:scale-[1.05] hover:shadow-[0_9px_47px_11px_rgba(51,51,51,0.18)]",onClick:()=>_(w.ticket_id,e.id),children:[(0,n.jsx)("div",{id:e.id,children:e.username}),(0,n.jsx)("div",{className:"bg-gray text-sm text-zinc-400",children:e.email})]},e.id))})]})})]})}),(0,n.jsxs)("div",{className:"flex items-stretch",children:[(0,n.jsxs)("div",{className:" w-[18%] items-stretch bg-slate-100",children:[(0,n.jsx)("div",{className:"mx-2 my-1 mt-2 text-xl",children:"Filters"}),(0,n.jsx)("div",{className:"".concat("Resolved"==f?"border-sky-500 text-sky-500":"border-gray-300 text-gray-400"," m-2  inline-block cursor-pointer rounded-lg border-2 px-4 py-2"),onClick:()=>O("Resolved"),children:"Resolved"}),(0,n.jsx)("div",{className:"".concat("Open"==f?"border-sky-500 text-sky-500":"border-gray-300 text-gray-400"," inline-block  cursor-pointer rounded-lg border-2 px-4 py-2 "),onClick:()=>O("Open"),children:"Open"})]}),(0,n.jsxs)("div",{className:"w-[82%]",children:[(0,n.jsxs)("table",{className:"w-[100%]",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:" m-10 bg-gray-200/50",children:[(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Creator"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Assigned To"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Title"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Status"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Created on"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Details"})]})}),(0,n.jsx)("tbody",{children:g.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:e.createdby}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:e.assignedto||(0,n.jsx)(D,{ticket:e})}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:e.title}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:(0,n.jsx)("span",{className:"".concat("Open"==e.status?"text-[#f03e3e] bg-[#f03e3e1a]":"Resolved"==e.status?"text-[#14ae6d] bg-[#e7f5f0]":"text-[#D68D00] bg-[#D68D001A] ","  rounded-full px-2 py-1 text-sm "),children:e.status})}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:(0,d.i)(e.createdat)}),(0,n.jsx)("td",{className:"border-b border-sky-500",onClick:()=>N(e),children:(0,n.jsx)("span",{className:" cursor-pointer rounded-full bg-blue-200   px-3 py-1 text-sm text-blue-500 hover:bg-blue-100",children:"View Details"})})]},e.ticket_id))})]}),(0,n.jsx)(i.Z,{items:""==f?b.length:l.length,currentPage:s,pageSize:11,onPageChange:e=>{a(e)}})]}),(0,n.jsxs)("div",{className:"hidden w-[22%] bg-slate-200 p-5",id:"modal",children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{onClick:A(),children:"X"})}),(0,n.jsx)("div",{className:"header"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"search"})}),(0,n.jsx)("div",{className:"all-users"})]})]})]})})}(a=l||(l={}))[a.All=0]="All",a[a.Today=1]="Today",a[a.OneWeek=2]="OneWeek",a[a.OneMonth=3]="OneMonth",a[a.OneYear=4]="OneYear";var h=function(e){let{surveyData:t}=e,[s,a]=(0,c.useState)([]),[l,i]=(0,c.useState)(0),[d,o]=(0,c.useState)(),[u,x]=(0,c.useState)(""),[h,b]=(0,c.useState)([]);(0,c.useEffect)(()=>{a(t)},[]);let m=e=>{let t=e.target.value;i(t),console.log("Selection Value",t)};(0,c.useEffect)(()=>{g()},[l]);let g=()=>{let e=new Date;console.log("dropwdownValue is ",l,0,typeof l,"number");let t=parseInt(l);switch(console.log(0===l),t){case 0:o(new Date(e.getFullYear()-100,e.getMonth(),e.getDate()).toISOString()),console.log("all");break;case 1:o(new Date(e.getFullYear(),e.getMonth(),e.getDate()-1).toISOString());break;case 2:o(new Date(e.getFullYear(),e.getMonth(),e.getDate()-7).toISOString());break;case 3:o(new Date(e.getFullYear(),e.getMonth()-1,e.getDate()).toISOString());break;case 4:o(new Date(e.getFullYear()-1,e.getMonth(),e.getDate()).toISOString());break;default:console.log("The default case for dropdown was called")}};(0,c.useEffect)(()=>{p()},[d]);let p=()=>{let e=t.filter(e=>{let t=new Date(e.createdat).toISOString();return!d||d<t});console.log("filter by date",e),b(e)},j=e=>{x(e);let t=h.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||null!=t.assignedto&&t.assignedto.trim().toLowerCase().includes(e.toLowerCase()));console.log("bbb",t),a(t)};return(0,c.useEffect)(()=>{j(u)},[h]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center relative mx-4 my-4",children:[(0,n.jsx)(r.Z,{onChangeCallback:j,placeholder:"Search Tickets"}),(0,n.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,n.jsx)("label",{htmlFor:"my-select",className:"font-medium text-gray-700",children:"Sort by:"}),(0,n.jsxs)("select",{id:"my-select",className:"w-[180px] px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:e=>m(e),children:[(0,n.jsx)("option",{value:0,children:"All Time"}),(0,n.jsx)("option",{value:1,children:"Today"}),(0,n.jsx)("option",{value:2,children:"Last one week"}),(0,n.jsx)("option",{value:3,children:"Last one month"}),(0,n.jsx)("option",{value:4,children:"Last one year"})]})]})]}),(0,n.jsx)(f,{surveyData:s})]})}},26615:function(e,t,s){"use strict";var a=s(57437),l=s(2265);t.Z=e=>{let{onChangeCallback:t,placeholder:s}=e,[n,c]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"flex items-center gap-2 border-2 border-gray-300 rounded-full overflow-hidden px-2 has-[:focus]:border-sky-300",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"25px",height:"25px",children:(0,a.jsx)("path",{d:"M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"})}),(0,a.jsx)("input",{className:" bg-white h-[2rem] px-5 rounded-lg text-sm focus:outline-none w-full",type:"search",value:n,onChange:e=>{let s=e.target.value;c(s),t&&t(s)},name:"search",placeholder:s})]})}},73930:function(e,t,s){"use strict";var a=s(57437),l=s(17278),n=s.n(l);t.Z=e=>{let{items:t,pageSize:s,currentPage:l,onPageChange:c}=e;console.log("items -> ",t);let r=Math.ceil(t/s);if(1===r)return null;let i=Array.from({length:r},(e,t)=>t+1);return(0,a.jsx)("div",{children:(0,a.jsx)("ul",{className:n().pagination,children:i.map(e=>(0,a.jsx)("li",{className:e===l?n().pageItemActive:n().pageItem,onClick:()=>c(e),children:(0,a.jsx)("a",{className:n().pageLink,children:e})},e))})})}},35123:function(e,t,s){"use strict";s.d(t,{i:function(){return a}});let a=e=>{if(!e)return"";let t=new Date(e),s=t.getUTCMonth()+1,a=t.getUTCFullYear(),l=t.getUTCDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][s-1];return"".concat(n," ").concat(l,", ").concat(a)}},43561:function(e,t,s){"use strict";s.d(t,{HM:function(){return n},Nf:function(){return r},OA:function(){return l},dQ:function(){return c},mu:function(){return i}}),s(74590);var a=s(58064),l=(0,a.$)("75a8f0df29fbc5d9ed038a63256389ddcaf318c4");(0,a.$)("c209c09362fa20cbed56af258953b52262feaccc");var n=(0,a.$)("777da57429d2269445386e1c1705a5a5327ec0fd"),c=(0,a.$)("b6558d937610141ed48787f4792a92cd116d0873"),r=(0,a.$)("92a6dade841af0fa08376101f1391bd44b18dafb"),i=(0,a.$)("f4c14cd734994430527605c5c534be48cfc3582a");(0,a.$)("ab9d7ea00ff0dbb00ad42d5a0edc121994b61750"),(0,a.$)("6b04dd2f52e628e3ef8237caef2a3981589e0945"),(0,a.$)("0d3b394a6f5b2ee7d22e897eaecc161123665419")},30999:function(e,t,s){"use strict";s.d(t,{BF:function(){return c},P$:function(){return n},_X:function(){return l}}),s(74590);var a=s(58064),l=(0,a.$)("c3a6fc5c59e2081ad90a6af0191920ab22d8d718");(0,a.$)("bfb948864d3a9223fe1b23007ea4ecc247e7419e"),(0,a.$)("ef8258559ec09924b33df9cdb206b83c322e79bf");var n=(0,a.$)("258046a1e3860fa89174224a272f0cdf55590a87");(0,a.$)("f7abf20a8088752418c2e27ab26067e3f68fe53d");var c=(0,a.$)("5929f08dcffcabce9ece9ec262c4d1da2aec33a2");(0,a.$)("8b3bb30f46c0d6e334351cdbc6f39faf04c6bdb7"),(0,a.$)("a448f998d28c1535f4ba9b2d14794207c3b56e92"),(0,a.$)("d16ec756617f7017d927ecb303b422c45c2b5f8f"),(0,a.$)("4858cff1d6c3cbafd4219b6ca1e3648ed5c80d77"),(0,a.$)("deb9a62e45009688455aa5d6d724f09a72e9c0c6")},17278:function(e){e.exports={container:"Pagination_container__K2pXc",pagination:"Pagination_pagination__YO7tt",pageLink:"Pagination_pageLink__Dbtuc",pageItem:"Pagination_pageItem__S74oz",pageItemActive:"Pagination_pageItemActive__tUfHZ"}}},function(e){e.O(0,[180,971,23,744],function(){return e(e.s=17141)}),_N_E=e.O()}]);