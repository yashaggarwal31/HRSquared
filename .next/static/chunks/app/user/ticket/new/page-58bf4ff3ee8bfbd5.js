(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{19523:function(e,t,o){Promise.resolve().then(o.bind(o,26676))},58064:function(e,t,o){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return l}});let n=o(74590);function l(e){let{createServerReference:t}=o(6671);return t(e,n.callServer)}},26676:function(e,t,o){"use strict";o.r(t);var n=o(57437),l=o(2265),c=o(43561),i=o(10741);t.default=()=>{let[e,t]=(0,l.useState)(!1),[o,r]=(0,l.useState)({ticketCategory:"",ticketSubCategory:"",ticketSubject:"",ticketDescription:"",ticketPriority:""}),[a,s]=(0,l.useState)([]),[d,u]=(0,l.useState)(new Map),[m,b]=(0,l.useState)(new Map),{user:f}=(0,i.aF)();(0,l.useEffect)(()=>{!async function(){let e=await (0,c.OA)();console.log("data ",e);let t=e.groups;s(t),console.log("final cat********88",t);let o=new Map,n=new Map,l=document.getElementById("ticketCategory");l.innerHTML="";let i=document.createElement("option");i.value="",i.innerHTML="-- Select Category --",l.appendChild(i),t.map(e=>{console.log(" ,",e);let t=document.createElement("option");t.value=e.groupname,t.innerHTML=e.groupname,l.appendChild(t),o.set(e.id,e.groupname),n.set(e.groupname,[])}),e.categories.map(e=>{let t=o.get(e.group_id),l=n.get(t);l.push(e.categoryname),n.set(t,l),m.set(e.categoryname,e.id)}),console.log("pro",n),u(n);let r=document.getElementById("ticketPriority");r.innerHTML="";let a=document.createElement("option");a.innerHTML="-- Select Priority --",a.value="",r.appendChild(a),e.ticketpriority.map(e=>{let t=document.createElement("option");t.innerHTML=e.name,t.value=e.id,r.appendChild(t)})}()},[]);let g=e=>{console.log(e);let{name:t,value:o}=e.target;console.log(t),console.log(o),r(e=>({...e,[t]:o}))},p=async e=>{for(let n in e.preventDefault(),t(!0),console.log("f",o),o)if(console.log("f",o[n]),""==o[n]){alert("All Fields are mandatory");return}let n={sub_category_id:parseInt(o.ticketSubCategory),priority:parseInt(o.ticketPriority),title:o.ticketSubject,description:o.ticketDescription,created_by:null==f?void 0:f.id};console.log("->",n);try{let e=await (0,c.HM)(JSON.stringify(n));console.log("post data",e),console.log(o),window.location.href="/user/ticket"}catch(e){console.log(e)}};return(0,n.jsx)("form",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,n.jsx)("div",{className:"w-full max-w-xl px-6",children:(0,n.jsxs)("div",{className:"ticket overflow-hidden rounded-lg bg-white shadow-lg",children:[(0,n.jsx)("div",{className:"ticket-header bg-blue-500 px-6 py-4",children:(0,n.jsx)("h2",{className:"text-xl font-bold text-white",children:"New Ticket"})}),(0,n.jsxs)("div",{className:"ticket-body p-6",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"ticketCategory",className:"mb-1 block text-sm font-semibold text-gray-600",children:"Category"}),(0,n.jsx)("select",{id:"ticketCategory",className:"w-full rounded-md border px-4 py-2 focus:border-blue-500 focus:outline-none",name:"ticketCategory",onChange:e=>{let{name:t,value:o}=e.target;console.log(t),console.log(o),r(e=>({...e,[t]:o}));let n=document.getElementById("ticketSubCategory");if(n){n.innerHTML="";let e=document.createElement("option");e.innerHTML="-- Select Subcategory --",null==n||n.appendChild(e)}console.log(n),console.log("subCategoryLocal",d),d.get(o).map(e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,null==n||n.appendChild(t)})},children:(0,n.jsx)("option",{value:"",children:"-- Select category --"})})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"ticketSubCategory",className:"mb-1 block text-sm font-semibold text-gray-600",children:"Subcategory"}),(0,n.jsx)("select",{id:"ticketSubCategory",className:"w-full rounded-md border px-4 py-2 focus:border-blue-500 focus:outline-none",name:"ticketSubCategory",onChange:e=>{let{name:t,value:o}=e.target;console.log(t),console.log(o);let n=Number(m.get(o));r(e=>({...e,[t]:n}))},children:(0,n.jsx)("option",{value:"",children:"First Select category"})})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"ticketTitle",className:"mb-1 block text-sm font-semibold text-gray-600",children:"Subject"}),(0,n.jsx)("input",{type:"text",id:"ticketTitle",className:"w-full rounded-md border px-4 py-2 focus:border-blue-500 focus:outline-none",placeholder:"Enter ticket title",name:"ticketSubject",value:o.ticketSubject,onChange:g})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"ticketContent",className:"mb-1 block text-sm font-semibold text-gray-600",children:"Description"}),(0,n.jsx)("textarea",{id:"ticketContent",className:"w-full rounded-md border px-4 py-2 focus:border-blue-500 focus:outline-none",name:"ticketDescription",placeholder:"Enter ticket content",value:o.ticketDescription,onChange:g})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"ticketAssigned",className:"mb-1 block text-sm font-semibold text-gray-600",children:"Priority"}),(0,n.jsx)("select",{id:"ticketPriority",className:"w-full rounded-md border px-4 py-2 focus:border-blue-500 focus:outline-none",name:"ticketPriority",value:o.ticketPriority,onChange:g,children:(0,n.jsx)("option",{children:"-- Select Priority --"})})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{onClick:p,className:"rounded-md bg-blue-500 px-6 py-2 text-white hover:bg-blue-600",children:"Submit"})})]})]})})})}},43561:function(e,t,o){"use strict";o.d(t,{HM:function(){return c},Nf:function(){return r},OA:function(){return l},dQ:function(){return i},mu:function(){return a}}),o(74590);var n=o(58064),l=(0,n.$)("75a8f0df29fbc5d9ed038a63256389ddcaf318c4");(0,n.$)("c209c09362fa20cbed56af258953b52262feaccc");var c=(0,n.$)("777da57429d2269445386e1c1705a5a5327ec0fd"),i=(0,n.$)("b6558d937610141ed48787f4792a92cd116d0873"),r=(0,n.$)("92a6dade841af0fa08376101f1391bd44b18dafb"),a=(0,n.$)("f4c14cd734994430527605c5c534be48cfc3582a");(0,n.$)("ab9d7ea00ff0dbb00ad42d5a0edc121994b61750"),(0,n.$)("6b04dd2f52e628e3ef8237caef2a3981589e0945"),(0,n.$)("0d3b394a6f5b2ee7d22e897eaecc161123665419")}},function(e){e.O(0,[741,971,23,744],function(){return e(e.s=19523)}),_N_E=e.O()}]);