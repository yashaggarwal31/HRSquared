(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{60489:function(e,t,s){Promise.resolve().then(s.bind(s,59937))},59937:function(e,t,s){"use strict";s.d(t,{default:function(){return g}});var l,a,n=s(57437),r=s(2265),i=s(26615),c=s(87138),o=function(){return(0,n.jsx)(c.default,{href:"/user/ticket/new",className:"inline-block cursor-pointer rounded-md bg-[#46a46c] p-2 text-white",children:(0,n.jsx)("div",{children:"+ Add Ticket"})})},d=s(73930),u=s(35123);let x=(e,t,s)=>{let l=(t-1)*s;return e.slice(l,l+s)};function h(e){let{ticketData:t}=e,[s,l]=(0,r.useState)(1),[a,i]=(0,r.useState)([{}]),[h,g]=(0,r.useState)(""),[m,p]=(0,r.useState)(t),[f,b]=(0,r.useState)([]),[j,y]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{p(t),l(1),g("")},[t]),(0,r.useEffect)(()=>{b(x(t,s,11))},[t]),(0,r.useEffect)(()=>{let e=[];console.log("next page",e=""==h?x(t,s,11):x(a,s,11)),b(e)},[s,h]);let w=e=>{if(e==h){i([{}]),g("");return}g(e);let t=m.filter(t=>t.status==e);i(t),l(1),b(x(t,s,11))};return(0,n.jsx)("div",{className:"",children:j?(0,n.jsxs)("div",{className:"fixed top-0 left-0 w-screen h-screen z-[99999999999999] flex flex-col items-center justify-center bg-black/40",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-white"})," ",(0,n.jsx)("h3",{children:"Fetching Tickets ..."})," "]}):(0,n.jsxs)("div",{children:[v&&(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex flex-col items-center justify-center bg-slate-500 bg-opacity-70 ",children:(0,n.jsxs)("div",{className:"relative rounded-md bg-white ",children:[(0,n.jsx)("div",{className:"absolute -right-3 -top-3  rounded-full bg-slate-600 px-3 py-1  text-white",children:(0,n.jsx)("button",{onClick:e=>{N(null),e.preventDefault()},children:"X"})}),(0,n.jsx)("div",{className:"flex w-fit max-w-sm flex-col items-center justify-center ",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 ",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4  rounded-t-md bg-indigo-500 px-7 py-5 text-white",children:[(0,n.jsxs)("div",{children:["#",v.id]}),(0,n.jsx)("div",{className:"text-2xl",children:v.title}),(0,n.jsx)("div",{className:"".concat("Open"==v.status?"bg-red-500":"Resolved"==v.status?"bg-green-500 ":"bg-yellow-500 ","  rounded-full px-2 py-1 text-sm text-white"),children:v.status})]}),(0,n.jsx)("div",{className:"px-7  text-lg",children:v.description}),(0,n.jsxs)("div",{className:" px-7 py-5",children:[(0,n.jsxs)("div",{className:"bg-gray text-sm text-zinc-400",children:["Opened at : ",(0,u.i)(v.createdat)]}),"Open"==v.status?(0,n.jsx)("div",{className:"flex justify-center"}):(0,n.jsxs)("div",{className:"bg-gray text-sm text-zinc-400",children:["Closed at : ",(0,u.i)(v.closedat)]})]})]})})]})}),(0,n.jsxs)("div",{className:"flex items-stretch",children:[(0,n.jsxs)("div",{className:"w-[18%] items-stretch bg-slate-100",children:[(0,n.jsx)("div",{className:"mx-2 my-1 mt-2 text-xl",children:"Filters"}),(0,n.jsx)("div",{className:"".concat("Resolved"==h?"border-sky-500 text-sky-500":"border-gray-300 text-gray-400"," m-2  inline-block cursor-pointer rounded-lg border-2 px-4 py-2"),onClick:()=>w("Resolved"),children:"Resolved"}),(0,n.jsx)("div",{className:"".concat("Open"==h?"border-sky-500 text-sky-500":"border-gray-300 text-gray-400"," inline-block  cursor-pointer rounded-lg border-2 px-4 py-2 "),onClick:()=>w("Open"),children:"Open"})]}),(0,n.jsxs)("div",{className:"w-[82%]",children:[(0,n.jsxs)("div",{className:"flex items-center  justify-between px-7 py-6",children:[(0,n.jsx)(o,{}),(0,n.jsx)("div",{children:(0,n.jsx)(c.default,{href:{pathname:"./ticket/me"},className:"inline-block cursor-pointer rounded-md bg-[#4b62f8]  p-2 text-white",children:"Assigned To Me"})})]}),(0,n.jsxs)("table",{className:"w-[100%]",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:" m-10 bg-gray-200/50",children:[(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Assigned To"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Title"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Status"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Created on"}),(0,n.jsx)("th",{className:"px-10 py-3 text-left",children:"Details"})]})}),(0,n.jsx)("tbody",{children:f.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:e.assignedto||(0,n.jsx)("div",{className:"text-zinc-400",children:"Yet to assigned"})}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:e.title}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:(0,n.jsx)("span",{className:"".concat("Open"==e.status?"text-[#f03e3e] bg-[#f03e3e1a]":"Resolved"==e.status?"text-[#14ae6d] bg-[#e7f5f0]":"text-[#D68D00] bg-[#D68D001A] ","  rounded-full px-2 py-1 text-sm "),children:e.status})}),(0,n.jsx)("td",{className:"border-b border-sky-500 px-10 py-3",children:(0,u.i)(e.createdat)}),(0,n.jsx)("td",{className:"border-b border-sky-500",onClick:()=>N(e),children:(0,n.jsx)("span",{className:" cursor-pointer rounded-full bg-blue-200   px-3 py-1 text-sm text-blue-500 hover:bg-blue-100",children:"View Details"})})]},e.ticket_id))})]}),(0,n.jsx)(d.Z,{items:""==h?m.length:a.length,currentPage:s,pageSize:11,onPageChange:e=>{l(e)}})]})]})]})})}(l=a||(a={}))[l.All=0]="All",l[l.Today=1]="Today",l[l.OneWeek=2]="OneWeek",l[l.OneMonth=3]="OneMonth",l[l.OneYear=4]="OneYear";var g=function(e){let{surveyData:t}=e,[s,l]=(0,r.useState)([]),[a,c]=(0,r.useState)(0),[o,d]=(0,r.useState)(),[u,x]=(0,r.useState)(""),[g,m]=(0,r.useState)([]);(0,r.useEffect)(()=>{l(t)},[]);let p=e=>{let t=e.target.value;c(t),console.log("Selection Value",t)};(0,r.useEffect)(()=>{f()},[a]);let f=()=>{let e=new Date;console.log("dropwdownValue is ",a,0,typeof a,"number");let t=parseInt(a);switch(console.log(0===a),t){case 0:d(new Date(e.getFullYear()-100,e.getMonth(),e.getDate()).toISOString()),console.log("all");break;case 1:d(new Date(e.getFullYear(),e.getMonth(),e.getDate()-1).toISOString());break;case 2:d(new Date(e.getFullYear(),e.getMonth(),e.getDate()-7).toISOString());break;case 3:d(new Date(e.getFullYear(),e.getMonth()-1,e.getDate()).toISOString());break;case 4:d(new Date(e.getFullYear()-1,e.getMonth(),e.getDate()).toISOString());break;default:console.log("The default case for dropdown was called")}};(0,r.useEffect)(()=>{b()},[o]);let b=()=>{let e=t.filter(e=>{let t=new Date(e.createdat).toISOString();return!o||o<t});console.log("filter by date",e),m(e)},j=e=>{x(e);let t=g.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||null!=t.assignedto&&t.assignedto.trim().toLowerCase().includes(e.toLowerCase()));console.log("bbb",t),l(t)};return(0,r.useEffect)(()=>{j(u)},[g]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center relative mx-4 my-4",children:[(0,n.jsx)(i.Z,{onChangeCallback:j,placeholder:"Search Tickets"}),(0,n.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,n.jsx)("label",{htmlFor:"my-select",className:"font-medium text-gray-700",children:"Sort by:"}),(0,n.jsxs)("select",{id:"my-select",className:"w-[180px] px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onChange:e=>p(e),children:[(0,n.jsx)("option",{value:0,children:"All Time"}),(0,n.jsx)("option",{value:1,children:"Today"}),(0,n.jsx)("option",{value:2,children:"Last one week"}),(0,n.jsx)("option",{value:3,children:"Last one month"}),(0,n.jsx)("option",{value:4,children:"Last one year"})]})]})]}),(0,n.jsx)(h,{ticketData:s})]})}},26615:function(e,t,s){"use strict";var l=s(57437),a=s(2265);t.Z=e=>{let{onChangeCallback:t,placeholder:s}=e,[n,r]=(0,a.useState)("");return(0,l.jsxs)("div",{className:"flex items-center gap-2 border-2 border-gray-300 rounded-full overflow-hidden px-2 has-[:focus]:border-sky-300",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"25px",height:"25px",children:(0,l.jsx)("path",{d:"M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"})}),(0,l.jsx)("input",{className:" bg-white h-[2rem] px-5 rounded-lg text-sm focus:outline-none w-full",type:"search",value:n,onChange:e=>{let s=e.target.value;r(s),t&&t(s)},name:"search",placeholder:s})]})}},73930:function(e,t,s){"use strict";var l=s(57437),a=s(17278),n=s.n(a);t.Z=e=>{let{items:t,pageSize:s,currentPage:a,onPageChange:r}=e;console.log("items -> ",t);let i=Math.ceil(t/s);if(1===i)return null;let c=Array.from({length:i},(e,t)=>t+1);return(0,l.jsx)("div",{children:(0,l.jsx)("ul",{className:n().pagination,children:c.map(e=>(0,l.jsx)("li",{className:e===a?n().pageItemActive:n().pageItem,onClick:()=>r(e),children:(0,l.jsx)("a",{className:n().pageLink,children:e})},e))})})}},35123:function(e,t,s){"use strict";s.d(t,{i:function(){return l}});let l=e=>{if(!e)return"";let t=new Date(e),s=t.getUTCMonth()+1,l=t.getUTCFullYear(),a=t.getUTCDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][s-1];return"".concat(n," ").concat(a,", ").concat(l)}},17278:function(e){e.exports={container:"Pagination_container__K2pXc",pagination:"Pagination_pagination__YO7tt",pageLink:"Pagination_pageLink__Dbtuc",pageItem:"Pagination_pageItem__S74oz",pageItemActive:"Pagination_pageItemActive__tUfHZ"}}},function(e){e.O(0,[180,138,971,23,744],function(){return e(e.s=60489)}),_N_E=e.O()}]);